# åŽç«¯æ—¥å¿—æŸ¥çœ‹æŒ‡å—

## ðŸ“‹ æŸ¥çœ‹æ—¥å¿—çš„æ–¹æ³•

### æ–¹æ³•1ï¼šé€šè¿‡APIæŽ¥å£æŸ¥çœ‹ï¼ˆæŽ¨èï¼‰

è®¿é—®æ—¥å¿—æŸ¥çœ‹æŽ¥å£ï¼š
```
http://localhost:3000/api/logs
```

**å‚æ•°è¯´æ˜Ž**ï¼š
- `date`: å¯é€‰ï¼ŒæŒ‡å®šæŸ¥çœ‹çš„æ—¥æœŸï¼Œæ ¼å¼ä¸º `YYYY-MM-DD`
- é»˜è®¤æŸ¥çœ‹å½“å¤©çš„æ—¥å¿—

**ç¤ºä¾‹**ï¼š
```
http://localhost:3000/api/logs                    # æŸ¥çœ‹ä»Šå¤©çš„æ—¥å¿—
http://localhost:3000/api/logs?date=2024-01-15    # æŸ¥çœ‹æŒ‡å®šæ—¥æœŸçš„æ—¥å¿—
```

**è¿”å›žæ ¼å¼**ï¼š
```json
{
  "success": true,
  "data": [
    {
      "timestamp": "2024-01-15T10:30:00.000Z",
      "level": "info",
      "message": "å¼€å§‹ç¿»è¯‘",
      "data": {
        "text": "ä½ å¥½ï¼Œä¸–ç•Œï¼...",
        "mode": "zh-ar",
        "quality": "standard"
      }
    }
  ]
}
```

### æ–¹æ³•2ï¼šæŸ¥çœ‹æ—¥å¿—æ–‡ä»¶

æ—¥å¿—æ–‡ä»¶ä¿å­˜åœ¨ `backend/logs/` ç›®å½•ä¸‹ï¼ŒæŒ‰æ—¥æœŸå‘½åï¼š
```
backend/logs/2024-01-15.log
```

**æ—¥å¿—æ–‡ä»¶æ ¼å¼**ï¼š
æ¯è¡Œä¸€ä¸ªJSONå¯¹è±¡ï¼ŒåŒ…å«ï¼š
- `timestamp`: æ—¶é—´æˆ³
- `level`: æ—¥å¿—çº§åˆ«ï¼ˆinfo, error, warnï¼‰
- `message`: æ—¥å¿—æ¶ˆæ¯
- `data`: é™„åŠ æ•°æ®ï¼ˆå¯é€‰ï¼‰

### æ–¹æ³•3ï¼šæŽ§åˆ¶å°è¾“å‡º

å¦‚æžœé€šè¿‡ `npm run dev` å¯åŠ¨æœåŠ¡å™¨ï¼Œæ—¥å¿—ä¼šåŒæ—¶è¾“å‡ºåˆ°æŽ§åˆ¶å°ã€‚

## ðŸ” æ—¥å¿—çº§åˆ«è¯´æ˜Ž

### INFOï¼ˆä¿¡æ¯ï¼‰
- æœåŠ¡å™¨å¯åŠ¨ä¿¡æ¯
- ç¿»è¯‘è¯·æ±‚å¼€å§‹å’Œå®Œæˆ
- APIè°ƒç”¨è®°å½•
- å¥åº·æ£€æŸ¥è¯·æ±‚

### ERRORï¼ˆé”™è¯¯ï¼‰
- ç¿»è¯‘å¤±è´¥
- APIè°ƒç”¨é”™è¯¯
- æ–‡ä»¶è¯»å–é”™è¯¯
- å…¶ä»–ç³»ç»Ÿé”™è¯¯

### WARNï¼ˆè­¦å‘Šï¼‰
- éžè‡´å‘½æ€§è­¦å‘Šä¿¡æ¯

## ðŸ“Š ç¿»è¯‘æ—¥å¿—è¯¦è§£

### æ ‡å‡†æ¨¡å¼åˆ†æ­¥åŒ–ç¿»è¯‘æ—¥å¿—

```
1. å¼€å§‹ç¿»è¯‘
   - æ–‡æœ¬å†…å®¹ï¼ˆå‰50å­—ç¬¦ï¼‰
   - ç¿»è¯‘æ¨¡å¼ï¼ˆzh-ar/ar-zhï¼‰
   - è´¨é‡ç­‰çº§ï¼ˆstandardï¼‰

2. ä½¿ç”¨åˆ†æ­¥åŒ–ç¿»è¯‘å¤„ç†
   - æ ‡è¯†ä½¿ç”¨åˆ†æ­¥åŒ–å¤„ç†

3. ç¬¬ä¸€æ­¥ï¼šå¼€å§‹ç¿»è¯‘åˆ†æžå’Œç­–ç•¥
   - å¼€å§‹åˆ†æžé˜¶æ®µ

4. åˆ†æžå“åº”
   - Claude APIçš„åˆ†æžå“åº”ï¼ˆå‰200å­—ç¬¦ï¼‰

5. ç¬¬äºŒæ­¥ï¼šå¼€å§‹å®žé™…ç¿»è¯‘
   - å¼€å§‹ç¿»è¯‘é˜¶æ®µ

6. ç¿»è¯‘å“åº”
   - Claude APIçš„ç¿»è¯‘å“åº”ï¼ˆå‰200å­—ç¬¦ï¼‰

7. ç¿»è¯‘å®Œæˆ
   - ç¿»è¯‘ç»“æžœï¼ˆå‰50å­—ç¬¦ï¼‰
```

### é€Ÿç¿»/ç²¾ç¿»æ¨¡å¼æ—¥å¿—

```
1. å¼€å§‹ç¿»è¯‘
   - æ–‡æœ¬å†…å®¹ï¼ˆå‰50å­—ç¬¦ï¼‰
   - ç¿»è¯‘æ¨¡å¼ï¼ˆzh-ar/ar-zhï¼‰
   - è´¨é‡ç­‰çº§ï¼ˆfast/premiumï¼‰

2. ä½¿ç”¨å•æ­¥ç¿»è¯‘å¤„ç†
   - æ ‡è¯†ä½¿ç”¨å•æ­¥å¤„ç†

3. Claudeå“åº”
   - Claude APIçš„å®Œæ•´å“åº”ï¼ˆå‰200å­—ç¬¦ï¼‰

4. ç¿»è¯‘å®Œæˆ
   - ç¿»è¯‘ç»“æžœï¼ˆå‰50å­—ç¬¦ï¼‰
```

## ðŸ› ï¸ è°ƒè¯•æŠ€å·§

### 1. æŸ¥çœ‹ç‰¹å®šç±»åž‹çš„æ—¥å¿—

ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æˆ–Postmanï¼š
```javascript
// æŸ¥çœ‹æ‰€æœ‰ç¿»è¯‘ç›¸å…³çš„æ—¥å¿—
fetch('/api/logs')
  .then(res => res.json())
  .then(data => {
    const translationLogs = data.data.filter(log => 
      log.message.includes('ç¿»è¯‘')
    )
    console.log(translationLogs)
  })
```

### 2. æŸ¥çœ‹é”™è¯¯æ—¥å¿—

```javascript
// æŸ¥çœ‹æ‰€æœ‰é”™è¯¯æ—¥å¿—
fetch('/api/logs')
  .then(res => res.json())
  .then(data => {
    const errorLogs = data.data.filter(log => 
      log.level === 'error'
    )
    console.log(errorLogs)
  })
```

### 3. æŸ¥çœ‹ç‰¹å®šæ—¶é—´çš„æ—¥å¿—

```javascript
// æŸ¥çœ‹æœ€è¿‘1å°æ—¶çš„æ—¥å¿—
fetch('/api/logs')
  .then(res => res.json())
  .then(data => {
    const oneHourAgo = new Date(Date.now() - 60 * 60 * 1000)
    const recentLogs = data.data.filter(log => 
      new Date(log.timestamp) > oneHourAgo
    )
    console.log(recentLogs)
  })
```

## ðŸ“ˆ æ€§èƒ½ç›‘æŽ§

### è¯·æ±‚å“åº”æ—¶é—´

æ—¥å¿—ä¸­åŒ…å«æ¯ä¸ªè¯·æ±‚çš„å“åº”æ—¶é—´ï¼š
```
POST /api/translate/claude - 200 - 2500ms
```

### ç¿»è¯‘è´¨é‡åˆ†æž

é€šè¿‡æ—¥å¿—å¯ä»¥åˆ†æžï¼š
- ä¸åŒè´¨é‡ç­‰çº§çš„ç¿»è¯‘æ—¶é—´
- åˆ†æ­¥åŒ–ç¿»è¯‘ vs å•æ­¥ç¿»è¯‘çš„æ€§èƒ½å·®å¼‚
- é”™è¯¯çŽ‡å’Œå¤±è´¥åŽŸå› 

## ðŸ”§ æ—¥å¿—é…ç½®

### ä¿®æ”¹æ—¥å¿—çº§åˆ«

åœ¨ `backend/app.js` ä¸­ä¿®æ”¹æ—¥å¿—å‡½æ•°ï¼š
```javascript
function logToFile(level, message, data = null) {
  // å¯ä»¥æ·»åŠ æ—¥å¿—çº§åˆ«è¿‡æ»¤
  if (level === 'debug' && process.env.NODE_ENV === 'production') {
    return // ç”Ÿäº§çŽ¯å¢ƒä¸è®°å½•debugæ—¥å¿—
  }
  // ... å…¶ä»–ä»£ç 
}
```

### æ—¥å¿—è½®è½¬

æ—¥å¿—æ–‡ä»¶æŒ‰å¤©è‡ªåŠ¨åˆ†å‰²ï¼Œå¯ä»¥æ·»åŠ æ—¥å¿—æ¸…ç†åŠŸèƒ½ï¼š
```javascript
// æ¸…ç†7å¤©å‰çš„æ—¥å¿—æ–‡ä»¶
function cleanupOldLogs() {
  const logDir = path.join(__dirname, 'logs')
  const files = fs.readdirSync(logDir)
  const sevenDaysAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)
  
  files.forEach(file => {
    const filePath = path.join(logDir, file)
    const stats = fs.statSync(filePath)
    if (stats.mtime < sevenDaysAgo) {
      fs.unlinkSync(filePath)
    }
  })
}
```

## ðŸš€ å¿«é€Ÿå¼€å§‹

1. **å¯åŠ¨æœåŠ¡å™¨**ï¼š
   ```bash
   npm run dev
   ```

2. **æŸ¥çœ‹å®žæ—¶æ—¥å¿—**ï¼š
   - æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000/api/logs`
   - æˆ–æŸ¥çœ‹æŽ§åˆ¶å°è¾“å‡º

3. **æµ‹è¯•ç¿»è¯‘åŠŸèƒ½**ï¼š
   - åœ¨å‰ç«¯è¿›è¡Œç¿»è¯‘æ“ä½œ
   - è§‚å¯Ÿæ—¥å¿—è®°å½•

4. **åˆ†æžæ—¥å¿—**ï¼š
   - æŸ¥çœ‹ç¿»è¯‘è¿‡ç¨‹
   - ç›‘æŽ§æ€§èƒ½æŒ‡æ ‡
   - æŽ’æŸ¥é”™è¯¯é—®é¢˜

## ðŸ“ æ³¨æ„äº‹é¡¹

1. **æ—¥å¿—æ–‡ä»¶å¤§å°**ï¼šæ—¥å¿—æ–‡ä»¶ä¼šéšæ—¶é—´å¢žé•¿ï¼Œå»ºè®®å®šæœŸæ¸…ç†
2. **æ•æ„Ÿä¿¡æ¯**ï¼šæ—¥å¿—ä¸­å¯èƒ½åŒ…å«ç¿»è¯‘å†…å®¹ï¼Œæ³¨æ„éšç§ä¿æŠ¤
3. **æ€§èƒ½å½±å“**ï¼šæ—¥å¿—è®°å½•ä¼šè½»å¾®å½±å“æ€§èƒ½ï¼Œç”Ÿäº§çŽ¯å¢ƒå¯è€ƒè™‘å¼‚æ­¥å†™å…¥
4. **å­˜å‚¨ç©ºé—´**ï¼šç¡®ä¿æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´å­˜å‚¨æ—¥å¿—æ–‡ä»¶ 